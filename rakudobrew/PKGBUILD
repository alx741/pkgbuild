# Maintainer: Austin <austin.haedicke@gmail.com>

pkgname=rakudobrew
pkgver=c4f2bcf
pkgrel=1
pkgdesc="'quick and dirty' Perl6 compiler on MoarVM"
arch=('i686' 'x86_64')
url="https://github.com/tadzik/rakudobrew"
license=('PerlArtistic')
makedepends=('git' 'perl')
conflicts=('rakudo' 'rakudo-star')
source=('git://github.com/tadzik/rakudobrew')
md5sums=('SKIP')
srcdir="~/.rakudobrew"

pkgver() {
  cd rakudobrew
  git describe --always | sed 's|-|.|g'
}

prepare() {
  mkdir -p ~/.rakudobrew
}

build() {
  export PATH=~/.rakudobrew/bin:$PATH
  rakudobrew build moar
  rakudobrew build-panda
}

package() {
  cd $pkgdir
  sudo ln -s ~/.rakudobrew/* /usr/bin/  
}
